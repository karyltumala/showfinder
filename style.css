/* ========== THEME TOKENS ========== */
:root {
  --bg: #0b1020;
  --bg2: #0f1730;
  --text: #eaf0ff;
  --muted: #b7c3e6;
  --card: rgba(255, 255, 255, 0.06);
  --cardBorder: rgba(255, 255, 255, 0.12);
  --shadow: 0 18px 60px rgba(0,0,0,0.45);
  --accent: #7c5cff;
  --accent2: #3dd6ff;
  --btn: rgba(255, 255, 255, 0.10);
  --btnBorder: rgba(255, 255, 255, 0.14);
  --glow: rgba(124,92,255,0.35);
  --glow2: rgba(61,214,255,0.25);
}

body.light {
  --bg: #f7f8ff;
  --bg2: #eef1ff;
  --text: #101428;
  --muted: #445079;
  --card: rgba(255, 255, 255, 0.78);
  --cardBorder: rgba(20, 30, 60, 0.12);
  --shadow: 0 18px 60px rgba(20,30,60,0.12);
  --accent: #5b5cff;
  --accent2: #0ea5e9;
  --btn: rgba(255, 255, 255, 0.95);
  --btnBorder: rgba(20, 30, 60, 0.12);
  --glow: rgba(91,92,255,0.22);
  --glow2: rgba(14,165,233,0.18);
}

/* ========== BASE ========== */
* { box-sizing: border-box; margin: 0; padding: 0; }
html, body { height: 100%; }
body {
  font-family: ui-sans-serif, system-ui, Arial, sans-serif;
  background: linear-gradient(180deg, var(--bg), var(--bg2));
  color: var(--text);
  overflow-x: hidden;
}

.container { max-width: 1100px; margin: 0 auto; padding: 20px; }

/* ========== BACKGROUND BLOBS ========== */
.bg-blobs { position: fixed; inset: 0; z-index: -1; overflow: hidden; }
.blob {
  position: absolute;
  width: 520px; height: 520px;
  filter: blur(45px);
  opacity: 0.55;
  border-radius: 50%;
  transform: translate3d(0,0,0);
  animation: floaty 14s ease-in-out infinite;
}
.b1 { left: -140px; top: -160px; background: radial-gradient(circle, var(--accent), transparent 60%); }
.b2 { right: -160px; top: 20px; background: radial-gradient(circle, var(--accent2), transparent 60%); animation-duration: 18s; }
.b3 { left: 25%; bottom: -220px; background: radial-gradient(circle, rgba(255, 211, 110, 0.65), transparent 60%); animation-duration: 22s; }

@keyframes floaty {
  0%   { transform: translate(-10px, -10px) scale(1); }
  50%  { transform: translate(35px, 25px) scale(1.05); }
  100% { transform: translate(-10px, -10px) scale(1); }
}

/* ========== HEADER ========== */
.header {
  max-width: 1100px;
  margin: 18px auto 0;
  padding: 16px 18px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border: 1px solid var(--cardBorder);
  background: var(--card);
  border-radius: 18px;
  box-shadow: var(--shadow);
  backdrop-filter: blur(10px);
}

.brand { display: flex; gap: 12px; align-items: center; }
.logo {
  width: 44px; height: 44px;
  display: grid; place-items: center;
  border-radius: 14px;
  background: linear-gradient(135deg, rgba(124,92,255,.35), rgba(61,214,255,.20));
  border: 1px solid var(--cardBorder);
}
.header h1 { font-size: 20px; letter-spacing: 0.3px; }
.header p { margin-top: 2px; color: var(--muted); font-size: 13px; }

.header-actions { display: flex; gap: 10px; align-items: center; }
.icon-btn {
  width: 42px; height: 42px;
  border-radius: 14px;
  border: 1px solid var(--btnBorder);
  background: var(--btn);
  color: var(--text);
  cursor: pointer;
}
.icon-btn:hover { transform: translateY(-1px); }

/* ========== TABS ========== */
.tabs {
  display: flex;
  gap: 10px;
  margin-top: 12px;
  padding-top: 0;
}
.tab {
  padding: 10px 14px;
  border-radius: 14px;
  border: 1px solid var(--btnBorder);
  background: var(--btn);
  color: var(--text);
  cursor: pointer;
}
.tab.active {
  border-color: rgba(124,92,255,.45);
  box-shadow: 0 12px 40px rgba(124,92,255,0.18);
}
.tab:hover { transform: translateY(-1px); }

.tab-panel.hidden { display: none; }

/* ========== SEARCH + CONTROLS ========== */
.search {
  display: flex;
  gap: 10px;
  justify-content: center;
  margin: 18px 0 12px;
  flex-wrap: wrap;
}

.search input {
  width: min(620px, 100%);
  padding: 12px 14px;
  border: 1px solid var(--cardBorder);
  border-radius: 14px;
  background: var(--card);
  color: var(--text);
  outline: none;
  box-shadow: 0 10px 35px rgba(0,0,0,0.12);
}

.search input::placeholder { color: rgba(183,195,230,.8); }

.search button {
  padding: 12px 16px;
  border: 1px solid rgba(124,92,255,.35);
  border-radius: 14px;
  background: linear-gradient(135deg, rgba(124,92,255,.85), rgba(61,214,255,.65));
  color: white;
  cursor: pointer;
}
.search button:hover { opacity: 0.95; transform: translateY(-1px); }

.controls {
  display: flex;
  gap: 10px;
  justify-content: center;
  align-items: center;
  flex-wrap: wrap;
  margin-bottom: 10px;
}

.controls select, .controls .secondary {
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid var(--cardBorder);
  background: var(--card);
  color: var(--text);
}

.secondary { cursor: pointer; }
.secondary:hover { transform: translateY(-1px); }

.minRatingWrap {
  display: flex;
  gap: 8px;
  align-items: center;
  color: var(--muted);
  font-size: 14px;
}

.status { text-align: center; margin: 10px 0 18px; color: var(--muted); }

/* ========== RESULTS GRID ========== */
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(190px, 1fr));
  gap: 14px;
}

.card {
  background: var(--card);
  border: 1px solid var(--cardBorder);
  border-radius: 18px;
  overflow: hidden;
  cursor: pointer;
  box-shadow: 0 14px 50px rgba(0,0,0,0.18);
  transition: transform .12s ease, border-color .12s ease, box-shadow .12s ease;
  backdrop-filter: blur(10px);
  transform-style: preserve-3d;
  will-change: transform;
  position: relative;
}

/* Glow overlay */
.card::after {
  content: "";
  position: absolute;
  inset: -2px;
  border-radius: 20px;
  pointer-events: none;
  opacity: 0;
  transition: opacity .12s ease;
  background: radial-gradient(700px 320px at 20% 10%, var(--glow), transparent 60%),
              radial-gradient(700px 320px at 80% 20%, var(--glow2), transparent 60%);
}

.card:hover {
  border-color: rgba(124,92,255,.45);
  box-shadow: 0 20px 70px rgba(0,0,0,0.25);
}
.card:hover::after { opacity: 1; }

.poster { width: 100%; height: 265px; object-fit: cover; background: rgba(0,0,0,0.15); }
.card-body { padding: 12px; position: relative; z-index: 1; }
.card-title { font-weight: 800; font-size: 14px; margin-bottom: 6px; }
.card-meta { font-size: 12px; color: var(--muted); }

.card-actions {
  display: flex;
  gap: 8px;
  margin-top: 10px;
}
.card-actions button {
  flex: 1;
  padding: 9px 10px;
  border-radius: 14px;
  border: 1px solid var(--btnBorder);
  background: var(--btn);
  color: var(--text);
  cursor: pointer;
}
.card-actions button:hover { opacity: 0.92; }

.fav-badge {
  display: inline-block;
  margin-left: 6px;
  font-size: 12px;
  color: #ffd36e;
}

/* ========== SKELETONS ========== */
.skeleton {
  border-radius: 18px;
  border: 1px solid var(--cardBorder);
  background: var(--card);
  overflow: hidden;
  position: relative;
  height: 365px;
}
.sk-poster { height: 265px; background: rgba(255,255,255,0.06); }
.sk-lines { padding: 12px; display: grid; gap: 10px; }
.sk-line { height: 12px; border-radius: 999px; background: rgba(255,255,255,0.08); }
.sk-line.short { width: 55%; }

.skeleton::after {
  content: "";
  position: absolute;
  inset: 0;
  transform: translateX(-100%);
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.14), transparent);
  animation: shimmer 1.1s infinite;
}
@keyframes shimmer {
  100% { transform: translateX(100%); }
}

/* ========== LOAD MORE ========== */
.loadMoreWrap { display: flex; justify-content: center; margin-top: 16px; }
.hidden { display: none; }

/* ========== MODAL ========== */
.modal {
  position: fixed; inset: 0;
  background: rgba(0,0,0,0.55);
  display: flex; align-items: center; justify-content: center;
  padding: 18px;
}
.modal-content {
  width: min(950px, 100%);
  background: linear-gradient(180deg, var(--bg2), var(--bg));
  border: 1px solid var(--cardBorder);
  border-radius: 20px;
  padding: 16px;
  position: relative;
  box-shadow: var(--shadow);
}
.close {
  position: absolute; top: 10px; right: 10px;
  border: 1px solid var(--btnBorder);
  background: var(--btn);
  color: var(--text);
  padding: 8px 10px;
  border-radius: 14px;
  cursor: pointer;
}
.close:hover { transform: translateY(-1px); }

.details-wrap { display: grid; grid-template-columns: 240px 1fr; gap: 16px; }
@media (max-width: 700px) {
  .details-wrap { grid-template-columns: 1fr; }
  .poster { height: 240px; }
}

.details-poster { width: 100%; border-radius: 16px; border: 1px solid var(--cardBorder); }
.details h2 { margin-bottom: 8px; }
.details p { margin: 6px 0; color: var(--muted); line-height: 1.55; }
.badge {
  display:inline-block; margin-right: 8px; margin-bottom: 8px;
  padding: 5px 10px;
  border: 1px solid var(--cardBorder);
  border-radius: 999px;
  font-size: 12px;
  color: var(--muted);
}
a { color: var(--accent2); }
a:hover { opacity: 0.9; }

/* ========== ABOUT ========== */
.panel-head { margin: 6px 0 14px; text-align: center; }
.panel-head h2 { margin-bottom: 6px; }
.panel-head p { color: var(--muted); }

.about-cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 14px;
}
.about-card {
  background: var(--card);
  border: 1px solid var(--cardBorder);
  border-radius: 18px;
  padding: 14px;
  box-shadow: 0 14px 50px rgba(0,0,0,0.10);
}
.about-card h3 { margin-bottom: 6px; }
.about-card p { color: var(--muted); }

/* ========== TOAST ========== */
.toast {
  position: fixed;
  left: 50%;
  bottom: 22px;
  transform: translateX(-50%);
  padding: 10px 14px;
  border-radius: 14px;
  border: 1px solid var(--cardBorder);
  background: var(--card);
  color: var(--text);
  box-shadow: var(--shadow);
  backdrop-filter: blur(10px);
  z-index: 50;
  max-width: min(520px, 92vw);
  text-align: center;
}

/* ===== Modal hard-fix ===== */
.modal {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 18px;
  background: rgba(0,0,0,0.55);
  z-index: 9999; /* important */
}

.modal.hidden { display: none !important; }

.modal-content {
  width: min(950px, 100%);
  max-height: 85vh;
  overflow: auto;
  border-radius: 20px;
}

/* Ensure details area has height even while loading */
#details { min-height: 240px; }

/* Ensure the grid layout inside modal works */
.details-wrap {
  display: grid;
  grid-template-columns: 240px 1fr;
  gap: 16px;
  align-items: start;
}

@media (max-width: 700px) {
  .details-wrap { grid-template-columns: 1fr; }
}

.loader {
  width: 34px;
  height: 34px;
  border-radius: 50%;
  border: 3px solid rgba(255,255,255,0.18);
  border-top-color: rgba(255,255,255,0.75);
  margin: 0 auto;
  animation: spin 0.9s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

body.light .loader {
  border: 3px solid rgba(0,0,0,0.12);
  border-top-color: rgba(0,0,0,0.55);
}
